fragment ContactProps on Contact {
  id
  name
  email
  org
  role
}

fragment BaseConversationProps on Conversation {
  id
  creator {
    ...ContactProps
  }
  invitees {
    id
    name
    isContact
  }
  note
  status
  insertedAt
  occurredAt
  deletedAt
  signatures {
    id
    signedAt
    conversationId
    signer {
      ...ContactProps
    }
  }
}

fragment ConversationProps on Conversation {
  ...BaseConversationProps
  reviews {
    id
    conversationId
    insertedAt
    reviewer {
      ...ContactProps
    }
  }
  opps {
    ...OppProps
  }
}

fragment UserErrorProps on UserError {
  code
  message
}

fragment ConversationPayloadProps on ConversationPayload {
  conversation {
    ...ConversationProps
  }
  userError {
    ...UserErrorProps
  }
}

query GetConversations {
  getConversations {
    conversations {
      ...ConversationProps
    }
  }
}

query ViewConversation($id: ID!) {
  getConversation(id: $id) {
    ...ConversationPayloadProps
  }
}

mutation UpsertConversation($input: ConversationInput!) {
  upsertConversation(input: $input) {
    ...ConversationPayloadProps
  }
}

mutation DeleteConversation($input: DeleteConversationInput!) {
  deleteConversation(input: $input) {
    ...ConversationPayloadProps
  }
}

mutation SignConversation($input: SignInput!) {
  sign(input: $input) {
    ...ConversationPayloadProps
  }
}

mutation ProposeConversation($input: ProposeInput!) {
  propose(input: $input) {
    ...ConversationPayloadProps
  }
}

mutation ReviewConversation($input: ReviewInput!) {
  review(input: $input) {
    ...ConversationPayloadProps
  }
}


query Contacts {
  contacts {
    ...ContactProps
  }
}

subscription ConversationChanged($input: ConversationChangedInput!) {
  conversationChanged(input: $input) {
    ...ConversationProps
  }
}
